# 環境変数の検証とエラーハンドリング

## 問題
本番環境で`/register`エンドポイントにアクセスした際、以下のエラーが発生した：
```
Invalid `prisma.user.findUnique()` invocation: error: Environment variable not found: DATABASE_URL.
```

## 原因
- 本番環境で`DATABASE_URL`環境変数が設定されていなかった
- Prismaクライアントの初期化時に環境変数の存在チェックが行われていなかった
- エラーメッセージが不十分で、問題の原因と解決方法が分かりにくかった

## 対策
1. **Prismaクライアント初期化時の環境変数チェック**
   - `src/lib/prisma.ts`で`DATABASE_URL`の存在をチェック
   - 環境変数が設定されていない場合、明確なエラーメッセージをスロー
   - エラーメッセージに解決方法（デプロイプラットフォームでの環境変数設定方法）を含める

2. **READMEへのドキュメント追加**
   - 本番環境での環境変数設定方法を追加
   - AWS Amplify、Vercel等の主要なデプロイプラットフォームでの設定手順を記載

## 実装詳細
- `src/lib/prisma.ts`に環境変数チェックを追加
- エラーメッセージにデプロイプラットフォームでの設定方法を含める
- READMEにデプロイセクションを追加

## 今後の注意点
- 新しい環境変数を追加する際は、初期化時にチェックを追加する
- 本番環境へのデプロイ前に、必要な環境変数がすべて設定されていることを確認する
- 環境変数の設定方法をREADMEに必ず記載する
- 開発環境と本番環境で異なる環境変数が必要な場合は、明確に区別する

